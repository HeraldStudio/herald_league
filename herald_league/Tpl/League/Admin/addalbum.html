<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>上传图片</title>
<link rel="stylesheet" type="text/css" href="__Public__/Css/uploadspic.css?0517">
<link href="__Public__/Css/bootstrap/bootstrap.css" rel="stylesheet" media="screen"> 
<script src="http://lib.sinaapp.com/js/jquery/1.8/jquery.min.js"></script>
<script>var P="{:K_LINK}";</script>
<script type="text/javascript" src="__Public__/Js/makecover.js"></script>
<style>
	.row-fluid .span2{margin:10px 24px;}
	.figure{
		height:250px;
	}
	.photo{height:150px;text-align:center;}
	.figcaption{text-align:center;height:100px;}
	h5{padding:0;margin:0;}
	@media (min-width: 980px){
		#container{padding-top:50px;}
	}
	@media (min-width: 768px) and (max-width: 979px){
		#container{padding-top:0px;}
	}
</style>
	<!--[if IE 8]>
	<style type="text/css">
		#navbar{position: static;}
		#container{width:1170px;}
		#container{padding-top:0px;}
	</style>
	<![endif]-->
	<!--[if lt IE 8]>
	<style type="text/css">
		#navbar{position: static;}
		#container{width:1170px;}
		#container{padding-top:0px;}
	</style>
	<![endif]-->
</head>
<body style="font-family:微软雅黑;">

<script type="text/javascript" src="__Public__/Js/swfupload/swfupload.js"></script>
<script type="text/javascript" src="__Public__/Js/swfupload/plugins/swfupload.queue.js"></script>
<script type="text/javascript" src="__Public__/Js/swfupload/fileprogress.js"></script>
<script type="text/javascript" src="__Public__/Js/swfupload/handlers.js"></script>

<div class="navbar navbar-fixed-top" id="navbar">
	<div class="navbar-inner">
		<div class="container-fluid">
			<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="brand" href="#"><strong>活动平台</strong></a>
			<div class="nav-collapse collapse">
				<if condition="$loginuser">
				<else />
				<ul class="nav pull-right" style="text-decoration:none;">        
					 <li class="dropdown" >
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" id="login"> 登录 
							<b class="caret"></b></a>
						<ul class="dropdown-menu" style="min-width:0px;">
							<li><a href="http://herald.seu.edu.cn/useraccount/">个人登录</a></li>
							<li><a data-toggle="modal" href="#loginModal">社团登录</a></li>
						</ul>							
					</li>
					<li>
						<a id="leagueregester" href="{:U('League/Index/leagueRegester')}">社团注册</a>
					</li>
				</ul>
				</if>
				<form class="navbar-form pull-right">
					<input type="text" class="search-query span3" placeholder="Search">
					<button type="submit" class="btn">Go</button>
				</form>
				<ul class="nav">
					<li><a href="#">平台首页</a></li>
					<li><a href="{:U('/League/Index/leaguelist')}">社团列表</a></li>
					<li><a href="#">二手市场</a></li>
					<li><a href="#">失物招领</a></li>
				</ul>
				<if condition="$loginusertype eq 2">
				<ul class="nav pull-right">        
					 <li class="dropdown" >
						<a class="dropdown-toggle" data-toggle="dropdown" href="#menutest1"> {$loginusername} 
						<p class="new-message-all">3</p>
						<b class="caret"></b> </a>
						 <ul class="dropdown-menu">
							<li><a href="#">个人空间<p class="new-message-single">1</p></a></li>
							<li><a href="#">二手市场<p class="new-message-single">2</p></a></li>
							<li><a href="#">其他<p class="new-message-single">33</p></a></li>
							<li class="divider"></li>
							<li><a href="javascript:void(0)" class="logout">登出</a></li>
							<input type="hidden" id="loginuserid" value="{$loginuserid}"/>
						</ul>
					</li>
				</ul>
				<elseif condition="$loginusertype eq 1"/>
				<ul class="nav pull-right">        
					 <li class="dropdown" >
						<a class="dropdown-toggle" data-toggle="dropdown" href="#menutest1"> {$loginusername} 
						<b class="caret"></b> </a>
						 <ul class="dropdown-menu">		
							<li><a href="/herald_league/index.php/League/Admin/addactivity/leagueid/{$loginuserid}">发布活动</a></li>
							<li><a href="/herald_league/index.php/League/Admin/addalbum/leagueid/{$loginuserid}">上传照片</a></li>
							<li><a href="">社团空间</a></li>
							<li><a href="/herald_league/index.php/League/Admin/changeinfo/leagueid/{$loginuserid}">修改社团信息</a></li>
							<li class="divider"></li>
							<li><a href="javascript:void(0)" class="logout">登出</a></li>
						</ul>
					</li>
				</ul>
				</if>
			</div><!-- /.nav-collapse -->
		</div>
	</div>
</div>
<!--container-->
	<div class="container" id="container">
		<h2 style="text-align:center;">这里放个相册名吧</h2>
		<div class="row-fluid">
			<div class="span1" style="width:0;"></div>
			<volist name="picture" id="vp">
				<div class="span2 figure">				
					<div class="photo"><img src="__Uploads__/LeagueAlbum/s_{$vp.address}"></div>
					<div class="figcaption">
						<h5>照片名称:<span>{$vp.name}</span></h5>
						照片介绍:<span>{$vp.introduction}</span></br>
						<button class="btn setcover" id="{$vp.address}" data-albumid="{$albumid}">设为封面</button><br/>
					</div>
				</div>
			</volist> 
		</div>

		<!--delete by zr div class="col-left"-->
		<div class="bd-create-case" style="font-size:16px;">
		  <h2 style="text-align:center;">上传图片</h2>
		  <div class="bd-work-wrap">
			<form id="form1" action="{:U('League/Admin/uploadsAlbum')}" method="post" enctype="multipart/form-data">
				<div class="case-que-hd" style="font-size:18px;"> <span class="filename">图片文件名</span> <span class="filesize">大小</span> <span class="filedel">删除</span> </div>
				<!-- 上传队列-->
				<input type="hidden" id="albumid" value="{$albumid}"/>
				<div class="fieldset flash" id="fsUploadProgress"></div>
				<div class="case-que-foot" id="que-foot"> <span class="filename">共<i id="totalnum"></i>张图片 <a href="javascript:;" id="continue-add">继续添加案例图片</a></span> <span class="filedel">文件大小：<i id="totalsize"></i></span> </div>
				<div id="upload-btn"><span id="spanButtonPlaceHolder"></span></div>
			  </form>
			  <p id="upload-tips">提示：每次最多可以批量上传二十张照片，按着 “ctrl” 键可以一次选择多张照片</p>
			  <div id="upload-start" style="display:none">
				<button id="upload" class="btn">开始上传</button>
				&nbsp; <a href="#">取消上传</a> </div>
				   </div>
		</div>
	  <!--delete by zr /div-->
	  <!-- container right
	  <div class="col-right"></div>delete by zr-->
	</div>
	<div style="height: 100px;margin-top:30px;">
		<hr style="border-top: 1px solid black;margin:0px 40px 0px 40px;">
		<h5 class="center" style="text-align:center;padding-top:36px;margin:0;"> CopyRight &copy; 2001-2013 Herald.seu.edu.cn</h5>
	</div> 
<script type="text/javascript">
	var swfu, WID = "13";
	window.onload = function() {
		var conf = {
			flash_url : P + "./__Public__/Js/swfupload/swfupload.swf",
			upload_url : P + "herald_league/index.php/League/Admin/uploadsAlbum",
			file_size_limit : "2 MB",
			file_upload_limit:'20',
			file_types : "*.jpg;*.gif;*.png;*.jpeg",
			file_types_description : "Web Image Files",
			file_upload_limit : 100,
			file_queue_limit : 0,
			custom_settings : {
				progressTarget : "fsUploadProgress",
				cancelButtonId : "btnCancel"
			},
			debug : false,

			// Button settings
			button_image_url : P + ".__Public__/Js/swfupload/images/upload-btns.png",
			button_width : "97",
			button_height : "29",
			button_placeholder_id : "spanButtonPlaceHolder",
			button_action : SWFUpload.BUTTON_ACTION.SELECT_FILES,

			// The event handler functions are defined in handlers.js
			file_queued_handler : fileQueued,
			file_queue_error_handler : fileQueueError,
			file_dialog_complete_handler : fileDialogComplete,
			upload_start_handler : uploadStart,
			upload_progress_handler : uploadProgress,
			upload_error_handler : uploadError,
			upload_success_handler : uploadSuccess,
			upload_complete_handler : uploadComplete,
			queue_complete_handler : queueComplete	// Queue plugin event
		};

		swfu = new SWFUpload(conf);
	};
	
	//上传
	$('#upload').click(function(){
		swfu.startUpload();
		var albumid = $('#albumid').val();
		//alert(albumid);
		$.ajax({
			url: '{:U("League/Admin/uploadsAlbum")}',
			type: 'post',
			dataType: 'text',
			data: {albumid: albumid},
		})
		.done(function(data) {
			console.log(data);
		})
		.fail(function() {
			console.log("error");
		})
		.always(function() {
			console.log("complete");
		});
		
	})
	
	//继续添加
	$('#continue-add').click(function(){
		$('#que-foot').hide();
		$('#upload-btn').css({'opacity':1,'height':30});
		$('#upload-btn object').css({'height':29});
		
	})
</script><!--foot-->
	
</body>
</html>