<!DOCTYPE html>
<html lang="en">
  <head>
    <title>社团活动信息发布</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="__Public__/Css/bootstrap/bootstrap.min.css" rel="stylesheet" media="screen">
	<link href="__Public__/Css/bootstrap/datetimepicker.css" rel="stylesheet" media="screen">
	<style type="text/css">
		.formborder{
			padding-bottom:10px;
			margin-bottom:10px;
			border-bottom-width:1px;
			border-bottom-style:dashed;
			border-bottom-color:#D3D3D3;
		}
		.spform{
			width:500px;
		}
		#actPic{
			position:absolute;
			left:700px;
			top:80px;
		
		}
	</style>

	<link href="__Public__/Css/bootstrap/addactivity.css" rel="stylesheet" media="screen">

	<script src="__Public__/Js/bootstrap/jquery.js"></script>
    <script src="__Public__/Js/bootstrap/bootstrap.min.js"></script>
	<script type="text/javascript" src="__Public__/Js/bootstrap/bootstrap-datetimepicker.js" charset="UTF-8"></script>
	<script type="text/javascript" src="__Public__/Js/bootstrap/bootstrap-datetimepicker.fr.js" charset="UTF-8"></script>

	<script type="text/javascript">
	window.UEDITOR_HOME_URL = "__Public__/Ueditor/";
	</script>
	<load href="__Public__/Ueditor/ueditor.config.js" />
	<load href="__Public__/Ueditor/ueditor.all.min.js" />
	<script type="text/javascript">
		var ifvote=false;
		function myclick(){
			if(ifvote==false){
				$("#vote").slideToggle("slow");
				document.getElementById("votebut").innerHTML="收起投票";
				ifvote=true;
			}else{
				$("#vote").slideToggle("slow");
				document.getElementById("votebut").innerHTML="发起投票";
				ifvote=false;
			}
		}
		
		function mycheck(){
			var actname=document.getElementById("actName");
			var actplace=document.getElementById("actPlace");
			var acttel=document.getElementById("actTel");
			var actinfo=document.getElementById("activityinfo");

			if(actname.value==""){
				alert("要写活动名称哦~~");
			}
			else if(actplace.value==""){
				alert("不要忘了活动地点啊~~");
			}
			else if(acttel.value==""){
				alert("记得填写联系方式哟~~");
			}
			else if(actinfo.value==""){
				alert("活动详细信息很重要呀~~");
			}
			
		}
		var count=1;
		function delvote()
		{
			var pNode = document.getElementById("votes"); 
			var delNode=document.getElementById("vote1"); 
			pNode.removeChild(delNode);
		}
		function addvote()
		{ 
			count=count+1;
			var newNode = document.createElement();
			newNode.innerHTML = "<div class='controls' id='vote"+count+"'>" + count + ".<input type='text' class='input-xlarge' style='margin-bottom:10px;'/> "+
				"&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp  "+
				"&nbsp &nbsp &nbsp &nbsp<input type='file' /></div>"; 
			var parentNode = document.getElementById("votes"); 
			parentNode.appendChild(newNode); 
		}

	</script>
	<script type="text/javascript" src="__Public__/Js/bootstrap/addactivity.js" charset="UTF-8"></script>
  </head>
  
<body>
	<div class="row-fluid">
		<div class="span1"></div>
		<div class="span8">
			<h3 id="mainTitle">社团活动信息发布</h3>
			<form class="form-horizontal" method="post" action="{:U('/League/Admin/addActivityData')}">
				<input name="leagueid" value="{$leagueid}" type="hidden"/>
				<fieldset>
					<div class="control-group formSep formborder spform">
						<label for="actName" class="control-label">活动名称：</label>
						<div class="controls">
							<input type="text" id="actName" class="input-xlarge" name="activityname" value="">
						</div>
					</div>

					<div class="control-group formSep formborder" >
						<label for="actBegin" class="control-label">开始时间：</label>
						<div class="controls">
							<input size="16" type="text" value="{$time}" readonly class="form_datetime" name="starttime"/>
						</div>
					</div>

					<div class="control-group formSep formborder">
						<label for="actEnd" class="control-label">结束时间：</label>
						<div class="controls">
							<input size="16" type="text" value="{$time}" readonly class="form_datetime" name="endtime"/>
						</div>
					</div>
		
					<div class="control-group formSep formborder">
						<label for="actName" class="control-label">活动类型：</label>
						<div class="controls">
							<select id="activityclass" name="activityclass">
								<volist name="activityclasslist" id="vacl">
									<option>{$vacl.class}</option>
								</volist>
							</select>	
						</div>
					</div>
									
					<div class="control-group formSep formborder">
						<label for="actPlace" class="control-label">活动地点：</label>
						<div class="controls">
							<input type="text" id="actPlace" class="input-xlarge" name="activityplace" value="">
						</div>
					</div>
				
					<div class="control-group formSep formborder">
						<label for="actPlace" class="control-label">联系方式：</label>
						<div class="controls">
							<input type="text" id="actTel" class="input-xlarge" name="connectinfo" value="">
						</div>
					</div>
									
					<div class="control-group formSep formborder">
						<label for="actInfo" class="control-label">详细信息：</label>
						<div class="controls">
							<script type="text/plain" id="activityinfo" name="activityinfo"></script>
								<script type="text/javascript">
								$(function(){
									var activityinfo;
									var options = {
										initialFrameWidth:700,        //初化宽度
										initialFrameHeight:300,        //初化高度
										focus:false,                        //初始化时，是否让编辑器获得焦点true或false
										maximumWords:1000,        //允许的最大字符数
									};
									activityinfo = new UE.ui.Editor(options);
									activityinfo = new UE.ui.Editor(options);
									activityinfo.render("activityinfo");
									activityinfo.ready(function(){
										activityinfo.setContent('{$leagueintro|htmlspecialchars_decode}');     //加载数据库Action.class.PHP传过来的值
									});
								 });    
								 </script>
						</div>
					</div>
									
					<div class="control-group formSep formborder" id="vote" style="display:none;">
						<label for="actPlace" class="control-label">投票：</label>
						<div class="controls">
							主题：<input type="text" id="" class="input-xlarge" value="">
						</div>
						
						<div class="controls">
							<label class="radio inline">
								<input type="radio" name="radios" id="radio1" value="option1">单选
							</label>
							<label class="radio inline">
								<input type="radio" name="radios" id="radio2" value="option2">多选
							</label>
						</div>
						<div id="votes">
							<div class="controls" id="vote1" style="margin-bottom:10px;">
								1.<input type="text" id="" class="input-xlarge" value="">&nbsp &nbsp &nbsp &nbsp附加图片<input type="file" id="imgFile">
							</div>
						</div>
					</div>
									
					<div class="control-group">
						<div class="controls">
							<button class="btn btn-success" type="submit" onclick="mycheck()">提交信息</button>	
						</div>	
					</div>
									
				</fieldset>
			</form>	
			
			<button class="btn btn-info" id="cancel">取消</button>
			<button class="btn btn-info" id="voteBut" onclick="myclick()">发起投票</button>
			<button class="btn btn-info" id="addVote" onclick="addvote()">增加选项</button>
			<!-- 删除按钮 -->
			<button class="btn btn-warning" id="removeVote" onclick='delvote()'>删除选项</button>

			<div id="actPic">
				<a href="#myModal" role="button" class="btn btn-info" data-toggle="modal">添加活动宣传图片</a>	
			</div>
			
			<!-- Modal -->
			<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h3 id="myModalLabel">添加活动宣传图片</h3>
			  </div>
			  <div class="modal-body">
				
					<input type="file" id="fileinput" name="fileinput"><br/>
					<img src="" style="width:200px; height:200px;">
				
				
				
				
				
			  </div>
			  <div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
				<button class="btn btn-primary">上传</button>
			  </div>
			</div>
			<!-- Modal -->
			
		</div>
		<div class="span3"></div>
	</div>
	<script type="text/javascript">
		$(".form_datetime").datetimepicker({format: 'yyyy-mm-dd hh:ii'});
	</script>
</body>
</html>